<nav class="navbar d-none d-lg-flex navbar-expand-lg bg-body-secondary border-bottom">
  <div class="container-fluid">
    <ul class="navbar-nav">
      <li class="nav-item ps-1">
        <%= link_to root_path, class:"text-decoration-none d-flex align-items-center gap-2 pb-1" do %>
          <%= image_tag 'icons/aikku.png', style: "height: 2rem" %>
          ACCESS
        <% end %>
      </li>
    </ul>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
      </ul>
      <ul class="navbar-nav">
        <% if user_signed_in? %>
          <% if policy(User).index? %>
            <li class="nav-item <%= 'active' if params[:controller] == 'users' %>">
              <%= link_to users_path, title: t('navbar.users_title'), class: "d-flex justify-content-center gap-2 text-decoration-none py-2 text-black-50 px-3" do %>
                <span class="material-symbols-outlined fs-5 text-black-50">
                  group
                </span>
                Utilisateurs
              <% end %>
            </li>
          <% end %>
          <% if policy(Table).securite? %>
            <li class="nav-item <%= 'active' if params[:action] == 'securite' %>">
              <%= link_to securite_tables_path, title: t('navbar.security_title'), class: "d-flex justify-content-center gap-2 text-decoration-none py-2 text-black-50 px-3" do %>
                <span class="material-symbols-outlined fs-5 text-black-50">
                  lock
                </span>
                <%= t('security.title') %>
              <% end %>
            </li>
          <% end %>
          <li class="nav-item <%= 'active' if params[:action] == 'a_propos' %>">
            <%= link_to a_propos_path, title: t('navbar.about_title', sitename: @sitename), class: "d-flex justify-content-center gap-2 text-decoration-none py-2 text-black-50 px-3" do %>
              <span class="material-symbols-outlined fs-5 text-black-50">
                help
              </span>
              <%= t('misc.help') %>
            <% end %>
          </li>
          <li class="nav-item dropdown d-flex align-items-center">
            <label tabindex="0" class="avatar online avatar-placeholder" style="cursor: pointer;" data-bs-toggle="dropdown" aria-expanded="false">
              <% if current_user.avatar.attached? %>
                <div style="width: 2.5rem; border-radius: 100%; background-color: rgb(100 116 139);">
                  <%= image_tag(current_user.avatar, size:'25x25') %>
                </div>
              <% else %>
                <div style="width: 2rem; border-radius: 100%; background-color: rgb(15 23 42);">
                  <span class="text-light"><%= current_user.name.first.humanize %></span>
                </div>
              <% end %>
            </label>
            <ul class="dropdown-menu dropdown-menu-end py-0">
              <li class="text-center text-black my-2" title= <%= t('navbar.profile_title') %>>
                <%= current_user.name %> (<%= current_user.role %>)
              </li>
              <li>
                <%= button_to destroy_user_session_path, method: :delete, class:'btn btn-outline-danger text-black w-100 hover-text-white', 'data-turbo': false, title: t('auth.logout_title') do %>
                  <%= t('auth.logout') %>
                <% end %>
              </li>
            </ul>
          </li>
        <% end %>
        <li class="mt-2 mx-2">
          <% if I18n.locale == :fr %>
            <%= link_to url_for(request.params.merge(locale: 'en')), title: t('navbar.switch_language_title') do %>
              <span class="material-symbols-outlined" style="letter-spacing: -12px;">
                language language_french
              </span>
            <% end %>
          <% else %>
            <%= link_to url_for(request.params.merge(locale: 'fr')), title: t('navbar.switch_language_title') do %>
              <span class="material-symbols-outlined" style="letter-spacing: -12px;">
                language language_us
              </span>
            <% end %>
          <% end %>
        </li>
      </ul>
    </div>
  </div>
</nav>