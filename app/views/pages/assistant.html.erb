<h1 class="text-2xl mt-4 text-dark">
  Assistant
</h1>

<h4 class="my-4 text-info">
    Posez une question basée sur les données de vos collections, comme par exemple : 
    <ul class="mt-3">
        <li>Génère-moi les 3 prochaines interventions à prévoir, en te basant sur cette liste : [Date, Client, Type] ?</li>
        <li>Quelle est la plus petite date dans cette liste : [Date] ?</li>
        <li>etc...</li>
    </ul>

</h4>

<div class="text-secondary">
    Attention à bien respecter le format, le nom des attributs et à bien séparer la question des attributs avec un ':'
</div> 

<div class="mt-4">
    <%= form_tag assistant_path, method: :get, class: '' do %>

        <div class="mb-3">
            <%= label_tag :table_id, "Collection d'objets", class: 'form-label' %>
            <%= select_tag :table_id, 
                            options_from_collection_for_select(current_user.tables.order(:name), 'id', 'name'), 
                            class: 'form-select form-select-lg w-25' %>
        </div>

        <div>
            <%= label_tag :prompt, "Quelle est votre question ?", class: "label mb-2" %>
            <%= text_area_tag :prompt, params[:prompt], class: 'form-control form-control-lg w-75' %>
        </div>

        <%= submit_tag "Poser la question à l'assistant", class: 'btn btn-outline-info mt-4' %>
    <% end %>

    <% if @results %>
        <h4 class="text-2xl mt-4 text-secondary">
            Réponse de l'assistant : 
        </h4>

        <h5>
            <%= simple_format(@results, class: '') %>
        </h5>
    <% end %>

</div>